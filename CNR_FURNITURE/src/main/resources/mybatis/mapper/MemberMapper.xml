<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cnr_furniture.mapper.MemberMapper">
  <!-- 사원정보 조회 -->
  <select id="selectMember" resultType="com.cnr_furniture.domain.member.MemberVO">
    SELECT  E_ID,
            E_NAME,
            E_EMAIL,
            E_PH,
            E_PWD,
            E_DP_NAME,
            E_ROLE
    FROM    EMPLOYEE
    WHERE   E_EMAIL = #{E_EMAIL}
  </select>

  <!-- 직원목록 조회 -->
  <select id="employeeList" resultType="com.cnr_furniture.domain.member.MemberVO">
    SELECT  E_ID,
            E_NAME,
            E_EMAIL,
            E_PH,
            E_PWD,
            E_DP_NAME,
            E_ROLE
    FROM    EMPLOYEE
    WHERE   1 = 1
    <!--  권한 검색  -->
    <if test="find_Role != null and find_Role != ''">
      AND E_ROLE = #{find_Role}
    </if>
    <!--  부서명 검색  -->
    <if test="find_DP_name != null and find_DP_name != ''">
      AND E_DP_NAME Like '%' || #{find_DP_name} || '%'
    </if>
    <!--  사원명 검색  -->
    <if test="find_emp_name != null and find_emp_name != ''">
      AND E_NAME Like '%' || #{find_emp_name} || '%'
    </if>
    ORDER BY E_ID
  </select>

  <!-- 사원리스트 조회 -->
  <select id="staffList" resultType="com.cnr_furniture.domain.member.MemberVO">
    SELECT  E_ID,
            E_NAME,
            E_EMAIL,
            E_PH,
            E_PWD,
            E_DP_NAME,
            E_ROLE
    FROM    EMPLOYEE
    WHERE   E_ROLE = '사원'
    <!--  부서명 검색  -->
    <if test="find_DP_name != null and find_DP_name != ''">
      AND E_DP_NAME Like '%' || #{find_DP_name} || '%'
    </if>
    <!--  사원명 검색  -->
    <if test="find_emp_name != null and find_emp_name != ''">
      AND E_NAME Like '%' || #{find_emp_name} || '%'
    </if>
    ORDER BY E_ID
  </select>
  <!-- 매니저리스트 조회 -->
  <select id="managerList" resultType="com.cnr_furniture.domain.member.MemberVO">
    SELECT  E_ID,
            E_NAME,
            E_EMAIL,
            E_PH,
            E_PWD,
            E_DP_NAME,
            E_ROLE
    FROM    EMPLOYEE
    WHERE   E_ROLE = '매니저'
    <!--  부서명 검색  -->
    <if test="find_DP_name != null and find_DP_name != ''">
      AND E_DP_NAME Like '%' || #{find_DP_name} || '%'
    </if>
    <!--  사원명 검색  -->
    <if test="find_emp_name != null and find_emp_name != ''">
      AND E_NAME Like '%' || #{find_emp_name} || '%'
    </if>
    ORDER BY E_ID
  </select>
  <!-- 디렉터리스트 조회 -->
  <select id="directorList" resultType="com.cnr_furniture.domain.member.MemberVO">
    SELECT  E_ID,
            E_NAME,
            E_EMAIL,
            E_PH,
            E_PWD,
            E_DP_NAME,
            E_ROLE
    FROM    EMPLOYEE
    WHERE   E_ROLE = '디렉터'
    <!--  부서명 검색  -->
    <if test="find_DP_name != null and find_DP_name != ''">
      AND E_DP_NAME Like '%' || #{find_DP_name} || '%'
    </if>
    <!--  사원명 검색  -->
    <if test="find_emp_name != null and find_emp_name != ''">
      AND E_NAME Like '%' || #{find_emp_name} || '%'
    </if>
    ORDER BY E_ID
  </select>

  <!-- 권한 조회  -->
  <select id="roleList" resultType="com.cnr_furniture.domain.member.MemberVO">
    SELECT E_ROLE
    FROM EMPLOYEE
    GROUP BY E_ROLE
    ORDER BY E_ROLE
  </select>
  <!-- 부서 조회  -->
  <select id="dpNameList" resultType="com.cnr_furniture.domain.member.MemberVO">
    SELECT E_DP_NAME
    FROM EMPLOYEE
    GROUP BY E_DP_NAME
    ORDER BY E_DP_NAME
  </select>
</mapper>