<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cnr_furniture.mapper.ProcessMapper">
    <!-- 제조지시 목록 조회-->
    <select id="selectProcess" resultType="com.cnr_furniture.domain.process.ProcessVO">
        SELECT ROWNUM rn,
        INS_LOT_ID,
        INS_ITEM_ID,
        INS_EMP_ID,
        INS_CT_ID,
        INS_PI_ID,
        INS_LOT_SIZE,
        TO_CHAR(INS_START_DATE, 'YYYY-MM-DD HH24:MI:SS') AS INS_START_DATE,
        TO_CHAR(INS_END_DATE, 'YYYY-MM-DD HH24:MI:SS') AS INS_END_DATE
        FROM INSTRUCTION
        WHERE 1=1
        <if test="startDate != null and startDate !=''" >
            AND INS_START_DATE >= #{startDate}
        </if>
        <if test="endDate != null and endDate !=''">
            AND #{endDate} >=  INS_END_DATE
        </if>
        <if test="find_item_process != null and find_item_process !=''">
            AND INS_ITEM_ID = #{find_item_process}
        </if>
        ORDER BY rn ASC
    </select>
    <!-- 제조지시 목록 조회: 제품-->
    <select id="selectAllItems" resultType="com.cnr_furniture.domain.process.ProcessItemVO">
        SELECT I_ID, I_NAME FROM ITEM
    </select>

    <!-- 제조지시 등록 -->


    <!-- 제조지시 등록 조회: 공정-->
    <select id="selectPi" resultType="com.cnr_furniture.domain.process.ProcessInfoVO">
        SELECT PI_ID,
               PI_NAME,
               PI_SEQ
        FROM PROCESS_INFO
    </select>
    <!-- 제조지시 등록 조회: 계약-->
    <select id="selecProCt" resultType="com.cnr_furniture.domain.process.ProcessCtVO">
        SELECT ROWNUM rn
              ,CT_ID
              ,CT_ITEM_ID
              ,CT_QUANTITY
              ,CT_DATE
              ,CT_OB_DATE
        FROM CONTRACT
    </select>

</mapper>
